@model IEnumerable<Shtat.Models.History>

@{
    ViewBag.Title = "Report";
}

<div id="ServicesModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content" id='ServicesModalContent'>

        </div>
    </div>
</div>

<div id="ServicesModalDelete" class="modal fade">
    <div class="modal-dialog modal-sm">
        <div class="modal-content" id='ServicesModalDeleteContent'>

        </div>
    </div>
</div>

<h3>История Штатного расписания</h3>

<style type="text/css">
    TH {
        background: #EFF5FB; /* Цвет фона */
        border-bottom: double;
    }

    tr:nth-child(odd) {
        background: #EFF5FB; /* Цвет фона */
    }

    tr:nth-child(even) {
        background: #ffffff; /* Цвет фона */
    }
</style>







<label>
Выберите дату Штатного расписания:
</label>
<table>
    <tr>
        <td>
            <select class="form-control btn-block" id="HD">
                <option selected value="0">Выберите дату</option>
                @foreach (var d in ViewBag.HD)
                {
                    <option value="@d.HisDat"> @d.HisDat</option>
                }
            </select>

        </td>
        <td>
            <button type="submit" class="btn btn-secondary" style="min-width:100px" onclick="SaveHisDat()">Сформировать Штатное расписание</button>
            </td>
</tr>
</table>
<p></p>
<table>
    <tr>
        <td>
            <label>Подразделение</label>
        </td>
         <td>
            <label>Отдел</label>
         </td>
         <td>
            <label>Группа</label>
         </td>
        <td>
            <label>Участок</label>
        </td>
        <td>
            <label></label>
        </td>
        <td>
            <label></label>
        </td>
    </tr>
    <tr>
        <td>
       @Html.DropDownList("Podrazd", ViewBag.ppps as SelectList, "Выберите подразделение", new { @class = "form-control btn-block", id = "pppp" })
        </td>
         <td>
                <select id="otdel" name="otdel1" class="form-control">
                <option selected value="0">Выберите отдел</option>
            </select>
        </td>
        <td>
                <select id="gruppa" name="gruppa" class="form-control">
                <option selected value="0">Выберите группу</option>
            </select>
        </td>
        <td>
                <select id="uch" name="uch" class="form-control">
                <option selected value="0">Выберите участок</option>
            </select>
        </td>
        <td>
        <button type="button" class="btn btn-secondary" onclick="SaveH()"> <i class="mdi mdi-settings"></i>Применить фильтр</button>
        </td>
        <td>
        <button type="button" class="btn btn-secondary" onclick=""> <i class="mdi mdi-settings"></i>Сбросить фильтр</button>
        </td>
    </tr>
    </table>
<hr>
<table>
    <tr>
        <td>
            <button type="button" class="btn btn-secondary" onclick="loadReport()"> <i class="mdi mdi-settings"></i>Отчет в Excel</button>
        </td>
        
        <td>
            <button type="button" class="btn btn-secondary" onclick="GroupReport()"> <i class="mdi mdi-settings"></i>Отчет в PDF</button>
        </td>
    </tr>
</table>
<div id="test">

</div>
<p></p>

    <div id="tab">
        <table class="table">
            <tr>
                <th>
                    Подразделение
                </th>
                <th>
                    Отдел
                </th>
                <th>
                    Группа
                </th>
                <th>
                    Участок
                </th>
                <th>
                    ОКРБ
                </th>
                <th>
                    Должность
                </th>
                <th>
                    Сотрудник
                </th>
                <th>
                    АУП
                </th>
                <th>
                    БТС
                </th>
                <th>
                    Колич
                </th>
                <th>
                    Всего_ЗП
                </th>
                <th>
                    093_107
                </th>
                <th>
                    ВысКвал
                </th>
                <th>
                    ТехВид
                </th>
                <th>
                    ХарСпец
                </th>
                <th>
                    ЗаФил
                </th>
                <th>
                    ЗаКат
                </th>
                <th>
                    ЗаСтарш
                </th>
                <th>
                    ОкладПовыш
                </th>
                <th>
                    ЗаКонтр
                </th>
                <th>
                    1748
                </th>
                <th>
                    ДолжОклад
                </th>
                <th>
                    ПрофМаст
                </th>
                <th>
                    ВысДост
                </th>
                <th>
                    Прочая
                </th>
                <th>
                    Итог
                </th>
                <th>
                    Дата
                </th>
                <th>
                    Признак
                </th>
                <th></th>
            </tr>


            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Podrazd)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Otdel)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Gruppa)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Uch)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.OKRB)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Dolj)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Sotr)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.AUP)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Bts)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Kol)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Vsego)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.C093107)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.VisKval)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.TehVid)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.HarSpec)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ZaFil)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ZaKat)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ZaStar)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.OkPov)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ZaKontr)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.C1748)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.DoljOk)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ProfMast)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.VisDost)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Proch)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Itog)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Dat)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Priznak)
                    </td>

                </tr>
            }
        </table>
    </div>
    @*
        <script>

            $(function d() {
                $('#HD').change(function d() {
                    var ID = $(this).val();
                    $.ajax({
                        type: 'GET',
                        url: '@Url.Action("GetOtdel")/' + ID,
                        success: function d(data) {
                            $('#otdel').replaceWith(data);
                        }
                    });
                });
            })

        </script>*@

   <script>

    $(function d() {
        $('#pppp').change(function d() {
            var ID = $(this).val();
            $.ajax({
                type: 'GET',
                url: '@Url.Action("GetOtdel2")/' + ID,
                success: function d(data) {
                    $('#otdel').replaceWith(data);
                }
            });
        });
    })

</script>

